---
title: 'CFD meets RDM'
---


:::note[Learning Objectives]
By the end of this section, you should be able to:
1. Relate RDM concepts to CFD
2. 
:::
import Caption from '../../../components/Caption.astro';
import CustomAside from '../../../components/CustomAside.astro';
import Gif from '../../../components/Gif.astro';

import { Tabs, TabItem } from '@astrojs/starlight/components';
import { CardGrid } from '@astrojs/starlight/components';
import Option from '../../../components/Option.astro';
import MultipleChoice from '../../../components/MultipleChoice.astro';
import Box from '../../../components/Box.astro';
import Spoiler from '../../../components/Spoiler.astro';

Computational fluid dynamics remains unique among many modern disciplines developing big data RDM strategies. The constitutive equations of fluid motion are derived from classical Newtonian physics, therefore they are inherently deterministic. As a consequence, given sufficient information on the numerical setup, conditions, numerics, etc. the solution data can be perfectly replicated. The understanding of RDM in CFD must be considered from this perspective.

    
 

##  CFD data management 
As discussed last class, research data is created throughout the entire CFD workflow. This data takes many forms but are an essential component to assure reproducibility of the scientific work.  When breaking down the typical CFD workflow, we can see data generation and path the data takes.


![RDMprinciples.](../../../assets/figs_section3/ARC4CFD_RDMData.png "RDMprinciples")
<Caption>Data generation and lifecycle in a typical CFD workflow. </Caption>

CFD generates large amounts of raw data that must be curated prior storage. Given the deterministic nature of CFD results, many specific questions about data management needs to be broached.



## Do we need to store all data?
Data generated from Computational Fluid Dynamics is inherently deterministic. In other words, given the identical initial state and boundary conditions of a problem, abstracted from numerical and round-off errors, we should be able to reproduce the same dataset. The first question we need to ask is: do we need to store all the data?

Let's consider a modern case of turbulent channel flow at $Re_\tau~5200$ [(Lee and Moser, 2015)](https://www.cambridge.org/core/journals/journal-of-fluid-mechanics/article/direct-numerical-simulation-of-turbulent-channel-flow-up-to-mathitreittauapprox-5200/3AE84A5A48F83AF294F6CB042AF92DA8). This simulation requires over 80 billion grid points ($Nx=10240$, $Ny=1024$,  and  $Nz=7680$), assuming 5 variables at each grid point, the size for each snapshot if just under 26 Tb. If we need to store 10 snapshots, at a cost of \$5 per Tb/month, we can estimate a total cost of approximately \$15,000/year.

![RDMprinciples.](../../../assets/figs_section3/ARC4CFD_RDMcompromise.png "RDMprinciples")
<Caption>Data storage versus data generation. </Caption>

The decision on the amount of data to store is faced with two considerations:
1. cost of storage decreases [faster than Moore's law](https://pubs.aip.org/aip/adv/article/8/5/056506/1075722/Moore-s-law-realities-for-recording-systems-and)
2. cost of data re-generation (instead of storage) follows Moore's law

As the storage cost per Tb continues to decrease, 





### Relevant metadata storage



### Practical approach towards RDM
Create data using consistent and meaningful naming conventions



   




## Relating FAIR concepts to CFD

### **Findable** 


#### Persistant Identifiers
DOI


### Accessible


### Interoperable

#### Containerization
Reproducibility is a core principle of science. In order to reproduce data from numerical codes, we must be able to re-run the code, yet most codes rely on external libraries, codes, compilers, and modules that continually evolve. Therefore, a CFD code that runs and compiles today, may not easily be compiled in the future.  As interoperability and reuse represents some of the core concepts of FAIR, 

One concepts to enable the perennity of the current state of the software is containerization (see e.g. [Maric et al.](https://arxiv.org/pdf/2208.07460.pdf)). Containers, such as what is offered by [Docker](https://www.docker.com/resources/what-container/#:~:text=A%20Docker%20container%20image%20is,tools%2C%20system%20libraries%20and%20settings.), is a lightweight, standalone package that includes all the libraries and tools needed to run an application. These containers can be used to encapsulate current state of CFD tools, archived, and, at a future date, re-run.




### Reusable






    
 

## Open Science and CFD



 





The longterm storage of CFD data
As CFD codes are 



```python "even"
<?xml version="1.0" encoding="UTF-8"?>
<CFDsimulation>
  <overview>
    <title>Backward facing step</title>
    <description></description>
    <comparative_data> </comparative_data>
  </overview>
  <preliminary_calculations>
    <calculation_fname>Name </calculation_fname>
  </preliminary_calculations>
  <mesh>
    <title>The Great Gatsby</title>
    <author>F. Scott Fitzgerald</author>
    <genre>Classic</genre>
    <publication_year>1925</publication_year>
  </mesh>
  <solver>
    <title>The Great Gatsby</title>
    <version>The Great Gatsby</version>
    <compilation> </compilation>
  </solver>
  <numerics>
    <title>The Great Gatsby</title>
  </numerics>
  <initial_conditions>
    <title>The Great Gatsby</title>
  </initial_conditions>
  <boundary_conditions>
    <title>The Great Gatsby</title>
  </boundary_conditions>
  <output>
    <title>The Great Gatsby</title>
  </output>
  <HPCsystem>
    <title>The Great Gatsby</title>
  </HPCsystem>
</CFDsimulation>
```

## C


## References
More information: https://www.openaire.eu/opendatapilot-repository 
Zenodo: http://www.zenodo.org 
Re3data.org: http://www.re3data.org